import Head from "next/head";
import Image from "next/image";
import styles from "../styles/Home.module.css";
import CampaignInfo from "./components/CampaignInfo";

import CreativeRow from "./components/CreativeRow";
import CustomAdd from "./components/CustomAdd";
import SubHeading from "./components/SubHeading";
import ResultsCard from "./components/ResultsCard";
import { useState, useEffect } from "react";
import { InputsContext } from "./Contexts/InputsContext";

import {
  Card,
  Heading,
  Section,
  BodyText,
  HR,
  Button,
  IconButton,
  Tooltip,
} from "pier-design-system";

export default function Home() {
  const campaignText = "Set Campaign";
  const bodyText = "Fill in required campaign info";
  const creativeText = "Set Creative";

  const [creative, setCreativeRow] = useState([]);
  const [clientName, setClientName] = useState("");

  const addCreative = (e) => {
    setCreativeRow(creative.concat(<CreativeRow />));
  };

  const [clear, setClearAll] = useState([]);

  const clearAll = (e) => {
    console.log("clear all ran");
    e.preventDefault(); // üëàÔ∏è prevent page refresh
  };

  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <Heading className="main-heading">
          Rate, Spend, and SLA Generator
        </Heading>
        <Card className="card">
          <div className="card-style">
            <SubHeading text={campaignText} body={bodyText} />
            <CampaignInfo />
            <HR />
            <Section padding="xs"></Section>
            <Section padding="xs">
              <SubHeading text={creativeText} />
            </Section>
            <CreativeRow />
            <CustomAdd />
            <CreativeRow />
            {creative}

            <HR />

            <div className="buttons-section">
              <Tooltip text="Add creative">
                <IconButton
                  onClick={addCreative}
                  className="plus-button"
                  title="Button"
                  icon="far fa-plus"
                  size="sm"
                  disabled={false}
                  dark={false}
                  pill={false}
                  hero={true}
                />
              </Tooltip>
              <Button
                className="clear-all-button"
                onClick={clearAll}
                title="Button"
                size="sm"
                theme="standard"
                disabled={false}
                dark={false}
                pill={false}
              >
                Clear all
              </Button>
            </div>
          </div>
        </Card>

        <InputsContext.Provider value={{ clientName, setClientName }}>
          <ResultsCard />
          {console.log(clientName)}
        </InputsContext.Provider>

        <footer>
          <img src="/logo.svg" width="175px" />
        </footer>
      </main>
    </div>
  );
}
